if(!("onhashchange"in window)||!("querySelector"in document)){var tip="\u60a8\u5f53\u524d\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u592a\u8fc7\u9648\u65e7\uff01\u8bf7\u5347\u7ea7\u6d4f\u89c8\u5668\u4ee5\u7ee7\u7eed\u4f7f\u7528\u5c0f\u7c73\u670d\u52a1\u5427";$.browser.msie&&"6.0"==$.browser.version&&(tip="\u60a8\u5f53\u524d\u4f7f\u7528\u7684\u6d4f\u89c8\u5668IE6\u592a\u8fc7\u9648\u65e7\uff0c\u5df2\u7ecf\u662f10\u5e74\u524d\u7684\u4ea7\u54c1\u4e86\uff01\u8bf7\u5347\u7ea7\u6d4f\u89c8\u5668\u4ee5\u7ee7\u7eed\u4f7f\u7528\u5c0f\u7c73\u670d\u52a1\u5427");
$("body").html('<div class="fuck_layout">    <div class="fuck_content">    <div class="fuck_inner">    <h1>\u8bf7\u5347\u7ea7\u60a8\u7684\u6d4f\u89c8\u5668</h1>    <p class="fuck_intro">'+tip+'</p>    <p class="fuck_title">\u60a8\u53ef\u4ee5\u9009\u62e9\uff1a</p>    <div class="fuck_check">    <ul>    <li class="fuck_ch"><a href="http://www.google.cn/intl/zh-CN/chrome/browser/" target="_blank">Google Chrome</a></li>    <li class="fuck_ff"><a href="http://www.firefox.com.cn/download/" target="_blank">Firefox</a></li>    <li class="fuck_ie"><a href="http://windows.microsoft.com/zh-CN/internet-explorer/downloads/ie" target="_blank">Internet Explorer8</a></li>    </ul>    </div>    </div>    </div>    </div>');
$(window).resize(function(){var a=784<=$(window).height()?"100%":"784",b=960<=$(window).width()?"100%":"960";$(".fuck_layout").css({width:b,height:a})});$(window).trigger("resize")}
!function(a,b,c){function d(a,c){var d=b.createElement(a||"div"),f;for(f in c)d[f]=c[f];return d}function e(b){for(var a=1,c=arguments.length;a<c;a++)b.appendChild(arguments[a]);return b}function g(b,a,c,d){var f=["opacity",a,~~(100*b),c,d].join("-"),c=0.01+100*(c/d),d=Math.max(1-(1-b)/a*(100-c),b),g=p.substring(0,p.indexOf("Animation")).toLowerCase();n[f]||(o.insertRule("@"+(g&&"-"+g+"-"||"")+"keyframes "+f+"{0%{opacity:"+d+"}"+c+"%{opacity:"+b+"}"+(c+0.01)+"%{opacity:1}"+(c+a)%100+"%{opacity:"+
b+"}100%{opacity:"+d+"}}",o.cssRules.length),n[f]=1);return f}function f(b,a){var d=b.style,f,g;if(d[a]!==c)return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(g=0;g<k.length;g++)if(f=k[g]+a,d[f]!==c)return f}function j(b,a){for(var c in a)b.style[f(b,c)||c]=a[c];return b}function l(b){for(var a=1;a<arguments.length;a++){var d=arguments[a],f;for(f in d)b[f]===c&&(b[f]=d[f])}return b}function h(b){for(var a={x:b.offsetLeft,y:b.offsetTop};b=b.offsetParent;)a.x+=b.offsetLeft,a.y+=b.offsetTop;return a}
var k=["webkit","Moz","ms","O"],n={},p,o=function(){var a=d("style",{type:"text/css"});e(b.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"},m=function r(b){if(!this.spin)return new r(b);this.opts=l(b||{},r.defaults,q)};m.defaults={};l(m.prototype,{spin:function(b){this.stop();var a=this,c=a.opts,f=
a.el=j(d(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex}),g=c.radius+c.length+c.width,e,l;b&&(b.insertBefore(f,b.firstChild||null),l=h(b),e=h(f),j(f,{left:("auto"==c.left?l.x-e.x+(b.offsetWidth>>1):parseInt(c.left,10)+g)+"px",top:("auto"==c.top?l.y-e.y+(b.offsetHeight>>1):parseInt(c.top,10)+g)+"px"}));f.setAttribute("aria-role","progressbar");a.lines(f,a.opts);if(!p){var k=0,n=c.fps,m=n/c.speed,o=(1-c.opacity)/(m*c.trail/100),q=m/c.lines;(function w(){k++;for(var b=c.lines;b;b--){var d=
Math.max(1-(k+b*q)%m*o,c.opacity);a.opacity(f,c.lines-b,d,c)}a.timeout=a.el&&setTimeout(w,~~(1E3/n))})()}return a},stop:function(){var b=this.el;b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),this.el=c);return this},lines:function(b,a){function c(b,g){return j(d(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:b,boxShadow:g,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*f+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*
a.width>>1)+"px"})}for(var f=0,l;f<a.lines;f++)l=j(d(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:p&&g(a.opacity,a.trail,f,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&e(l,j(c("#000","0 0 4px #000"),{top:"2px"})),e(b,e(l,c(a.color,"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(b,a,c){a<b.childNodes.length&&(b.childNodes[a].style.opacity=c)}});(function(){function b(a,c){return d("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',
c)}var a=j(d("group"),{behavior:"url(#default#VML)"});!f(a,"transform")&&a.adj?(o.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(a,c){function d(){return j(b("group",{coordsize:l+" "+l,coordorigin:-g+" "+-g}),{width:l,height:l})}function f(a,l,h){e(k,e(j(d(),{rotation:360/c.lines*a+"deg",left:~~l}),e(j(b("roundrect",{arcsize:c.corners}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:h}),b("fill",{color:c.color,opacity:c.opacity}),b("stroke",{opacity:0}))))}
var g=c.length+c.width,l=2*g,h=2*-(c.width+c.length)+"px",k=j(d(),{position:"absolute",top:h,left:h});if(c.shadow)for(h=1;h<=c.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=c.lines;h++)f(h);return e(a,k)},m.prototype.opacity=function(b,a,c,d){b=b.firstChild;d=d.shadow&&d.lines||0;if(b&&a+d<b.childNodes.length&&(b=(b=(b=b.childNodes[a+d])&&b.firstChild)&&b.firstChild))b.opacity=c}):p=f(a,"animation")})();"function"==typeof define&&
define.amd?define(function(){return m}):a.Spinner=m}(window,document);
(function(a){M=a.M||{};M.tid=100;M.UA=navigator.userAgent.toLowerCase();var b=document;M.genId=function(b){return(b||"MID-")+""+this.tid++};var a=M,c="placeholder"in b.createElement("input"),d=function(){var b=navigator.plugins,a;if(a=0<b.length)a:{a=0;for(var c;c=b[a++];)if(-1<c.name.toLowerCase().indexOf("shockwave flash")){a=!0;break a}a=!1}return a}(),e;e="function"===typeof HTMLAudioElement||"object"===typeof HTMLAudioElement?(new Audio).canPlayType("audio/mpeg"):!1;a.ability={placeholder:c,
flash:d,audioMp3Supported:e,localStorage:!!window.localStorage,fixedSupport:function(){var a=b.createElement("div").style;a.cssText="position:absolute;position:fixed;";return"fixed"==a.position}()};M.C=function(a,c){var d=b.createElement(a||"div");if(c&&"object"==typeof c){var e={"class":"className",html:"innerHTML","for":"htmlFor"in d?"htmlFor":"for",css:function(b,a){if("string"==typeof a)b.style.cssText=a;else{var c=[],d=/^[a-z]+([A-Z])[a-z]+/,f;for(f in a){var e=f;d.test(f)&&(e=f.replace(/([A-Z])/,
function(b,a){return"-"+a.toLowerCase()}));c.push(e+":"+a[f])}b.style.cssText=c.join(";")}}},h;for(h in c)if(h in e)if("string"==typeof e[h])d[e[h]]=c[h];else e[h](d,c[h]);else h in d?d[h]=c[h]:d.setAttribute(h,c[h])}return d};M.params=function(b){b=b||location.search;if(!b)return!1;for(var a=b.split("?"),b={},a=2==a.length?a[1]:a[0],a=a.split("&"),c=0;c<a.length;c++){var d=a[c],d=d.split("=");b[d[0]]=d.slice(1,d.length).join("=")||""}return b};M.decodeParams=function(b){if("object"!==typeof b)return b;
var a=[],c;for(c in b)a.push(c+"="+encodeURIComponent(b[c]));return a.join("&")};M.template=function(b,a,c){c=c||/\{([\w-]+)\}/g;return b.replace(c,function(b,d){if(void 0!==a[d]){var e;e=a[d]instanceof Function?a[d].call(a):a[d];return c.test(e)?M.template(e,a,c):e}return""})};M.locate=function(b){if(b)window.location.href=b;else return window.location.href};M.override=function(b,a){if(a)for(var c in a)b.prototype[c]=a[c]};M.extend=function(b,a){var c=function(){},d=a,e=d,k=b.prototype,d=d.constructor!==
Object.prototype.constructor?d.constructor:function(b){for(var a in b)this[a]=b[a];"init"in this&&this.init instanceof Function&&this.init()};c.prototype=k;c=d.prototype=new c;c.constructor=d;c.override=function(b){M.override(d,b)};d.extend=function(b){return M.extend(d,b)};M.override(d,e);return d};M.getScript=function(b,a){var c=document.createElement("script");c.src=b;var d=document.getElementsByTagName("head")[0];c.attachEvent?c.onreadystatechange=function(){var b=c.readyState;if("loaded"==b||
"complete"==b)a&&a(),c.onreadystatechange=null,d.removeChild(c)}:c.onload=c.onerror=function(){a&&a();c.onload=c.onerror=null;d.removeChild(c)};d.appendChild(c)};M.Object=M.extend({},{on:function(b,a){if(-1<b.indexOf(","))for(var c=b.split(","),d=0;d<c.length;d++)this.on(c[d],a);else c=(c=(this.evts=this.evts||{})[b])||(this.evts[b]=[]),c.push(a);return this},fire:function(){this.evts=this.evts||{};var b=Array.prototype.slice.call(arguments,0),a=b.shift(),c=this;"string"!=typeof a&&(c=a,a=b.shift());
var d=this.evts[a];if(d instanceof Array)for(var e=0;e<d.length;e++)this.eventTag=a,!1===d[e].apply(c,b)&&(d.splice(e,1),e--);return this},un:function(b,a){this.evts=this.evts||{};var c=this.evts[b];if(c)if(a)for(var d=0,e;e=c[d++];)a===e&&(c.splice(d-1,1),d--);else this.evts[b]=null;return this}});M.ProxyModel=M.extend(M.Object,{EventProxy:new M.Object,onET:function(b,a){this.EventProxy.on(b,a);M.Object.prototype.on.call(this,b,a)},fireET:function(){var b=this.EventProxy,a=[].slice.call(arguments,
0);a.unshift(this);b.fire.apply(b,a);a.shift();M.Object.prototype.fire.apply(this,a)}});M.merge=function(b,a){if(a instanceof Array)for(var c=0;c<a.length;c++){var d=a[c];"object"==typeof d?(b[c]=d instanceof Array?[]:{},M.merge(b[c],d)):b[c]=d}else if("object"==typeof a)for(c in a)d=a[c],"object"==typeof d?(b[c]=d instanceof Array?[]:{},M.merge(b[c],d)):b[c]=d};a=Array.prototype;a.getAt=function(b){return this[b]};a.each=function(b){for(var a=0;a<this.length;a++)if(!1===b.call(this,a,this[a]))return a};
"indexOf"in a||(a.indexOf=function(b,a){for(a=a||0;a<this.length;++a)if(this[a]===b)return a;return-1});a.remove=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};"filter"in a||(a.filter=function(a){for(var b=[],c=0;c<this.length;c++)!0===a(this[c],c)&&b.push(this[c]);return b});String.prototype.encodeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.decodeHTML=function(){return this.replace(/&quot;/g,'"').replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};"".trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")})})(window);
(function(){var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,g=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a};return function(f,j,l){var h=a;1==arguments.length&&"[object String]"==Object.prototype.toString.call(f)&&!/\d/.test(f)&&(j=f,f=void 0);f=f?new Date(f):new Date;if(isNaN(f))throw SyntaxError("invalid date");
j=""+(h.masks[j]||j||h.masks["default"]);"UTC:"==j.slice(0,4)&&(j=j.slice(4),l=!0);var h=h.i18n[h.i18n.language.toLowerCase()]||h.i18n["en-US"],k=l?"getUTC":"get",n=f[k+"Date"](),p=f[k+"Day"](),o=f[k+"Month"](),q=f[k+"FullYear"](),m=f[k+"Hours"](),t=f[k+"Minutes"](),r=f[k+"Seconds"](),k=f[k+"Milliseconds"](),s=l?0:f.getTimezoneOffset(),u={d:n,dd:g(n),ddd:h.dayNames[p],dddd:h.dayNames[p+7]||h.dayNames[p],m:o+1,mm:g(o+1),mmm:h.monthNames[o],mmmm:h.monthNames[o+12]||h.monthNames[o+12],yy:(""+q).slice(2),
yyyy:q,h:m%12||12,hh:g(m%12||12),H:m,HH:g(m),M:t,MM:g(t),s:r,ss:g(r),l:g(k,3),L:g(99<k?Math.round(k/10):k),t:h.t[12>m?0:1],tt:h.tt[12>m?0:1],T:h.T[12>m?0:1],TT:h.TT[12>m?0:1],Z:l?"UTC":((""+f).match(d)||[""]).pop().replace(e,""),o:(0<s?"-":"+")+g(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*n%10]};return j.replace(b,function(a){return a in u?u[a]:a.slice(1,a.length-1)})}}();a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};a.i18n={language:navigator.language||navigator.browserlanguage||navigator.userLanguage||"en-us","en-us":{dayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(","),
t:["a","p"],tt:["am","pm"],T:["A","AM"],TT:["AM","PM"]},"zh-cn":{dayNames:"\u5468\u65e5,\u5468\u4e00,\u5468\u4e8c,\u5468\u4e09,\u5468\u56db,\u5468\u4e94,\u5468\u516d,\u661f\u671f\u65e5,\u661f\u671f\u4e00,\u661f\u671f\u4e8c,\u661f\u671f\u4e09,\u661f\u671f\u56db,\u661f\u671f\u4e94,\u661f\u671f\u516d".split(","),monthNames:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),
t:["\u4e0a\u5348","\u4e0b\u5348"],tt:["\u4e0a\u5348","\u4e0b\u5348"],T:["\u4e0a\u5348","\u4e0b\u5348"],TT:["\u4e0a\u5348","\u4e0b\u5348"]}};Date.prototype.format=function(b,d){return a(this,b,d)};Date.prototype.formatH=function(a,b,e,g,f){var j=new Date;return this.getFullYear()==j.getFullYear()?(this.format(a),this.getMonth()==j.getMonth()&&j.getDate()-this.getDate()<(j.getDay()?j.getDay():7)?this.getDate()==j.getDate()?this.format(f):this.getDate()+1==j.getDate()?"\u6628\u5929"+this.format(f):this.format(g+
e+f):this.format(b+e+g+f)):this.format(a+b+g+e+f)};M.Util={encodeJSON:function(a){return"string"===typeof a?window.JSON?JSON.parse(a):eval("("+a+")"):a},decodeJSON:function(a){if(window.JSON&&window.JSON.stringify)return JSON.stringify(a);var b=[];if("object"==typeof a){if(a instanceof Array){var e=[];b.push("[");for(var g=0;g<a.length;g++)e.push(M.Util.decodeJSON(a[g]));b.push(e.join());b.push("]")}else if(null!=a){b.push("{");e=[];for(g in a)e.push('"'+g+'":'+M.Util.decodeJSON(a[g]));b.push(e.join());
b.push("}")}return b.join("")}return"number"!==typeof a?'"'+(a||"")+'"':a},clone:function(){return M.encode(M.decode(json))},isNaN:function(a){return a!==a},getKeys:function(a){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(a);var b=[],e=0;for(b[e++]in a);return b},toArray:function(a){if(M.isIE){for(var b=[],e=0;e<a.length;e++)b.push(a[e]);return b}return Array.prototype.slice.call(a)},hashParams:function(a){a=(a||location.hash).replace(/(^#|#$)/g);return M.params(a)},setCookie:function(a,
b,e,g,f,j){document.cookie=a+"="+escape(b)+(e?"; expires="+e:"")+(g?"; path="+g:"")+(f?"; domain="+f:"")+(j?"; secure":"")},getCookie:function(a){for(var a=a+"=",b=a.length,e=document.cookie.split(";"),g=0,f;f=e[g++];)if(f=f.trim(),a==f.substring(0,b))return unescape(f.substring(b));return""},delCookie:function(a,b,e){M.Util.setCookie(a,"","Thu, 01 Jan 1970 00:00:00 GMT",b,e)}};M.encode=M.Util.encodeJSON;M.decode=M.Util.decodeJSON;var b=Array.prototype;b.getAt=function(a){return this[a]};b.each=function(a){for(var b=
0;b<this.length;b++)if(!1===a.call(this,b,this[b]))return b};"indexOf"in b||(b.indexOf=function(a,b){for(b=b||0;b<this.length;++b)if(this[b]===a)return b;return-1});b.remove=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};String.prototype.encodeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.decodeHTML=function(){return this.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,
"&")};"".trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")})})();
var Helper=M.extend(M.Object,{init:function(){var a=this;$("body").bind("click",function(b){var c=b.target;a.each(function(a){if(a.except){var e=0;$(a.except).each(function(){1==this.nodeType&&9==this.nodeType&&jQuery.contains(this,c)&&(e=1)});if(1==e)return 1}if(!jQuery.contains(this,c)&&c!=this)return a.close(b.target),!1})});a.cts=[];a.components={}},addAutoClose:function(a){var b=this;a.on("close",function(){for(var a=0,d;d=b.cts[a];a++)if(d==this){b.cts.splice(a,1);break}return!1});setTimeout(function(){b.cts.push(a)},
20)},each:function(a){for(var b=0,c;c=this.cts[b];b++)!1===a.call($(c.el).get(0),c)&&(this.cts.splice(b,1),b--)},closeAll:function(){var a=this.cts;if(0<a.length)for(;a.length;)a.pop().close()},addComponent:function(a){a&&(a.id in this.components&&this.removeComponent(a),this.components[a.id]=a)},removeComponent:function(a){delete this.components[a.id]},getCmp:function(a){return this.components[a]}});M.UI={Helper:new Helper};M.getCmp=function(a){return M.UI.Helper.getCmp(a)};
M.UI.Component=M.extend(M.Object,{autoel:!1,xtype:"component",init:function(){this.el||(this.el=document.createElement(this.elTag||"div"));if(this.events){for(var a in this.events)this.on(a,this.events[a]);delete this.events}if(this.listen)this.on("afterRender",function(){this.listen();return!1});(this.autoRender||this.renderTo)&&this.render();this.contextmenu&&$(this.el).contextmenu(function(a){new M.UI.Menu({e:a})});this.on("destory",function(){M.UI.Helper.removeComponent(this);return!1})},render:function(a){this.cls&&
$(this.el).addClass(this.cls);this.extStyle&&$(this.el).css(this.extStyle);this.attrs&&$(this.el).attr(this.attrs);var b=$(this.el).attr("id");if(""==b||void 0==b||null==b)b=M.genId("M-Gen-"+this.xtype+"-"),$(this.el).attr("id",b);$(this.el).addClass(this.xtype);this.id=b;M.UI.Helper.addComponent(this);if(void 0!==this.html||void 0!==this.text)this.renderBody(this.html||this.text);(a=a||this.renderTo||document.body)&&$(this.el).appendTo(a);this.doLayout();this.fire("afterRender")},getBody:function(){return this.body},
renderBody:function(a){$(this.body||this.el).html(a)},appendTo:function(a){a instanceof M.UI.Component?a.renderItem(this):$(this.el).appendTo(a)},renderItem:function(a){$(this.el).append(a.el)},doLayout:function(){this.setWidth(this.width);this.setHeight(this.height)},destory:function(){this.fire("destory");$(this.el).remove()},hide:function(){$(this.el).hide();this.fire("hide")}});
["Width","Height"].each(function(a,b){var c=b.toLowerCase();M.UI.Component.prototype["get"+b]=function(){return $(this.el)[c]()};M.UI.Component.prototype["_set"+b]=function(a){$(this.el)[c](a)};M.UI.Component.prototype["set"+b]=function(a){void 0!==a?(void 0!==this["min"+b]&&(a=Math.max(a,this["min"+b])),this["max"+b]&&(a=Math.min(a,this["max"+b])),void 0!==a&&(this["_set"+b](a),this.fire("resize"))):(a=this["get"+b](),void 0!=this["min"+b]&&a<this["min"+b]?(this["_set"+b](this["min"+b]),this.fire("resize")):
void 0!=this["max"+b]&&a>this["max"+b]&&(this["_set"+b](this["min"+b]),this.fire("resize")))}});M.UI.Button=M.UI.Component.extend({elTag:"a",attrs:{href:"javascript:void(0)"},xtype:"button",init:function(){this.cls=this.cls||"";this.cls+=" gray";M.UI.Component.prototype.init.call(this)},listen:function(){if(this.handler){var a=this;$(this.el).click(function(){a.handler();a.fire("click")});a.on("destory",function(){a.el.unbind("click")})}}});
M.UI.Container=M.UI.Component.extend({closeAction:"destory",close:function(a){this.fire("close",a);this[this.closeAction]()},hide:function(){$(this.el).hide();this.fire("hide")}});
M.UI.Panel=M.extend(M.UI.Container,{minWidth:80,minHeight:80,init:function(){var a=this;a.on("afterRender",function(){a.buttons&&0<a.buttons.length&&a.el.find(".foot").delegate(".btn","click",function(){var b=$(this).data("index"),b=a.buttons[b];if(!b.disabled&&"handler"in b)return b.handler.call(a,b.text,b)});a.closable&&a.el.delegate(".close_btn","click",function(){a.close();return!1})});M.UI.Container.prototype.init.call(a);a.mask&&a.store&&!a.store.loaded&&(a.showMask(),a.store.on("load",function(){a.stopMask();
return!1}));a.on("resize",this._resetMask)},_setHeight:function(a){if(this.title||this.closable){var b=$($(this.el)[0].firstChild.firstChild).outerHeight();$(this.body).height(a-b)}else $(this.body).height(a)},stopMask:function(){this._maskShow&&(this._maskShow.stop(),$(this._maskBg).remove());this._maskShow=null;this.fire("stopmask")},_resetMask:function(){var a=$(this.body).width();this._maskShow.el.style.top=$(this.body).height()/2+"px";this._maskShow.el.style.left=(a-20)/2+"px"},showMask:function(){if(this.body&&
!this._maskShow){var a=this.zIndex||3,b={zIndex:a},c=$(this.body).width(),d=$(this.body).height();if(80>c||80>d)b.lines=7,b.width=4,b.radius=7,b.length=2;b.color="#FFFFF1";b.top=d/2;b.shadow=!0;b.left=(c-40)/2;this._maskBg=M.C("div",{"class":"gray_box xmask",css:"z-Index:"+(a-1)});this.body.append(this._maskBg);this._maskShow=(new Spinner(b)).spin(this.body[0]);this._resetMask();this.fire("showmask")}},autoRender:1,closable:!1,xtype:"panel",render:function(a){var b=[];b.push('<div class="'+this.xtype+
'-box">');if(this.title||this.closable)b.push('<div class="head clearfix">'),this.title&&b.push("<h4>"+this.title+"</h4>"),this.closable&&b.push('<a href="javascript:void(0)" class="close_btn"></a>'),b.push("</div>");b.push('<div class="frame"><div class="content" style="position:relative"></div></div>');if(this.buttons){b.push('<div class="foot clearfix'+("left"==this.buttonAction?"tl_l":"")+'">');var c=this;this.buttons.each(function(a,d){b.push(c._genButton(a,d))});b.push("</div>")}b.push("</div>");
var d=M.C("div");d.innerHTML=b.join("");this.el=$(d);a||(a=this.renderTo||document.body);$(a).append(d);this.body=this.el.find(".content");this.frame=this.body.parent();M.UI.Container.prototype.render.call(this);this.mask&&this.showMask()},_genButton:function(a,b){var c=[];c.push('<div class="btn ');b["default"]||c.push("gray ");b.disabled&&c.push("disabled ");c.push('" data-index="'+a+'" >');c.push('<input type="');c.push(b["default"]?"submit":"button");c.push('" value="'+b.text+'" >');c.push("</div>");
return c.join("")},updateButton:function(a,b){this.buttons[a]=b;jqButton=$(".foot .btn:eq("+a+")");var c=M.C("div");c.innerHTML=this._genButton(a,b);jqButton.replaceWith(c.firstChild);c={};M.merge(c,this.buttons[a],b);this.buttons[a]=c}});
M.UI.DialogHelper={maskIndex:100,dialogs:[],showMask:function(a){var b=M.UI.DialogHelper;b.modalEl||(b.modalEl=$(M.C("div",{"class":"gray_box",id:"__mask__",css:{width:$(document).width()+"px",height:$(document).height()+"px"}})).appendTo("body"),$(window).bind("resize",function(){b.modalEl.width(Math.max($("body>.wrap").width(),960));b.modalEl.height(Math.max($("body>.wrap").height(),500))}));b.modalEl.css("zIndex",a.zIndex-1);b.modalEl.show();b.dialogs.push(a);return b.maskIndex},hideMask:function(){var a=
M.UI.DialogHelper;a.dialogs.pop();a.modalEl&&(1>a.dialogs.length?a.modalEl.hide():a.modalEl.css("zIndex",a.dialogs[a.dialogs.length-1].zIndex))},updateMask:function(a){for(var b=M.UI.DialogHelper,c=0;c<b.dialogs.length;c++)b.dialogs[c]==a&&b.dialogs.splice(c,1);b.showMask(a)}};$("body").bind("keyup",function(a){if(27==a.keyCode){var a=M.UI.DialogHelper.dialogs,b=a.length;b&&a[b-1].close()}});M.UI.Dialog=function(){this.init()};
M.UI.Dialog=M.extend(M.UI.Panel,{minWidth:150,doLayout:function(){var a=Math.max(500,$(window).height()),b=Math.max(960,$(window).width()),c=$(".dialog-box",this.el),d=$(".head",c).outerHeight(),e=$(".foot",c).outerHeight(),g=this.body,f=this.width;f||(f=g.outerWidth(),this.minWidth&&(f=Math.max(this.minWidth,f)));c.css({height:"auto",width:f+"px"});void 0!==this.height&&g.css({height:this.height-d-e,overflow:"auto"});this.el.css({left:(b-c.width())/2,top:(a-c.height())/2+$(document).scrollTop()});
this.body.outerHeight(!0)+d+e<a?(a=(a-c.height())/2,this.el.css({top:a+$(document).scrollTop()}),this.frame.height("auto")):(this.frame.css({height:a-d-e-80,overflow:"auto"}),a-=this.el.height(),this.el.css({top:0<a?a/2:v}))},init:function(){var a=this;a.zIndex=M.UI.DialogHelper.maskIndex+=10;a.on("afterRender",function(){a.modal&&M.UI.DialogHelper.showMask(a);a.el.css("z-index",a.zIndex);a.listenResize=function(){a.doLayout()};$(window).bind("resize",a.listenResize);a.on("destory",function(){$(window).unbind("resize",
a.listenResize)})});M.UI.Panel.prototype.init.call(a);a.on("close",M.UI.DialogHelper.hideMask);if(a.dragable){var b=a.el;b.find(".head").bind("mousedown",function(a){function d(a){b.css({left:a.pageX-f,top:a.pageY-g})}function e(){$(document).unbind("mousemove",d);$(document).unbind("mouseup",e)}var g=a.pageY,f=a.pageX,f=f-parseInt(b.css("left")),g=g-parseInt(b.css("top"));$(document).bind("mousemove",d);$(document).bind("mouseup",e)}).bind("mousedown",function(c){$(c.target).hasClass("close_btn")||
(a.zIndex=M.UI.DialogHelper.maskIndex+=10,a.modal&&M.UI.DialogHelper.updateMask(a),b.css("z-index",a.zIndex))})}},autoRender:1,closable:!0,xtype:"dialog",render:function(a){this.cls=this.cls||"";this.cls+=" clearfix";M.UI.Panel.prototype.render.call(this,a);this.el.attr("zIndex",this.zIndex)}});M.UI.Alert=function(a,b){"string"==typeof a?(this.title=b||"\u63d0\u793a",this.msg=a,this.init()):M.Object.prototype.constructor.call(this,a)};
M.UI.Alert=M.extend(M.UI.Dialog,{cancel:!1,modal:!0,constructor:M.UI.Alert,minWidth:300,init:function(){var a=this;this.buttons=[{text:"\u786e\u5b9a","default":!0,handler:function(b,c){a.onyes&&a.onyes.call(a,b,c);a.fire("yes");a.close()}}];this.cancel&&this.buttons.push({text:"\u53d6\u6d88",handler:function(b,c){a.oncancel&&a.oncancel.call(a,b,c);a.fire("cancel");a.close()}});this.msg&&(this.html=this.msg);M.UI.Dialog.prototype.init.call(this)}});
M.UI.Confirm=M.extend(M.UI.Alert,{buttonAction:"",cancel:!0});M.UI.Promot=M.extend(M.UI.Alert,{buttonAction:"",cancel:!0,init:function(){var a=['<div class="promot"><div class="msg">'+this.msg+"</div>"];a.push('<div class="input"><input type="text" class="text_input"></div></div>');this.msg=a.join("");M.UI.Alert.prototype.init.call(this);var b=this;this.buttons[0].handler=function(a,d){b.onyes&&!1!==b.onyes.call(b,a,d,b.el.find(".text_input").val())&&b.close();b.fire("yes")};this.el.find(".input > .text_input").focus()}});
M.UI.Menu=M.UI.Container.extend({minWidth:200,autoRender:1,elTag:"ul",itemHeight:48,zIndex:500,prefix:0,xtype:"menu",init:function(){if(this.e){var a=this.top||this.e.pageY;this.extStyle={left:this.left||this.e.pageX,zIndex:M.UI.Menu.prototype.zIndex++};var b=$("body").height(),c=this.itemHeight*this.items.length+this.prefix;"down"==(a+c>b?b-a>=c?"up":a>b/2?"up":"down":"down")?(this.extStyle.top=a,b<a+c&&(this.height=b-a,this.extStyle["overflow-y"]="auto")):(this.extStyle.bottom=b-a,c+b-a>b&&(this.height=
a,this.extStyle["overflow-y"]="auto"));this.extStyle.position="absolute";this.autoel=!0;M.UI.Container.prototype.init.call(this)}else M.UI.Container.prototype.init.call(this),this.maxHeight&&(a=this.items.length,this.extra&&(this.extra.topItem&&a++,this.extra.bottomItem&&a++),c=this.itemHeight*a+this.prefix,this.setHeight(Math.min(this.maxHeight,c)),$(this.el).css("overflow-y","auto"))},listen:function(){var a=this;$(a.el).find("li");$(a.el).delegate("li","hover",function(b){var c=$(this).data("index");
if(null!=c&&(c=a.items[c]||(a.extra?a.extra[c+"Item"]:void 0),c.menu)){var d="down"==this.expodAction?a.top+(i-1)*a.itemHeight:a.top+(i+1)*a.itemHeight;new M.UI.Menu({e:b,left:a.getWidth(),top:d,items:c.menu})}});$(a.el).delegate("li","click",function(b){var c=$(this).data("index"),d;if(null!=c){var e=a.realItems[c]||(a.extra?a.extra[c+"Item"]:void 0);!e.menu&&!0!==d&&(d=a.onItemClick(this,c,e,b));!1!==d&&(e.handler?d=e.handler.call(a,e):a.defaultHandler&&(d=a.defaultHandler.call(a,e)));return d}});
this.on("destory",function(){$(a.el).undelegate("li")});this.on("show,afterRender",function(){M.UI.Helper.addAutoClose(this)})},onItemClick:function(a,b){this.close();this.fire("itemClick",b,this.items[b])},update:function(a,b){var c=$(this.el).find(".menu-item");this.dataConverter&&(b=this.dataConverter(a,b));"number"==typeof a?c=c.get(a):(this.extra[a+"Item"]=b,c=c["bottom"==a?"last":"first"]());this.realItems[a]=b;$(c).replaceWith(this.genItemHtml(a,b));return c},genItemHtml:function(a,b){var c=
[],d=b.renderer||this.genItemInnerHtml;c.push('<li data-index="'+a+'"  class="menu-item ');b.cls&&c.push(b.cls);c.push(' ">');c.push(d(a,b));c.push("</li>");return c.join("")},genItemInnerHtml:function(a,b){var c=b.text||b.title,d=b.tip,e=[];e.push('<a href="javascript:;"');d&&e.push(' title="'+b.tip+'"');e.push(">"+c.encodeHTML()+"</a>");return e.join("")},appendItem:function(a){this.items.push(a);a=this.genItemHtml(a);$(this.el).append(a)},render:function(){var a=[],b=this;this.realItems={};var c=
function(c,d){if(b.dataConverter){var e=b.dataConverter(c,d);b.realItems[c]=e}else b.realItems[c]=d;a.push(b.genItemHtml(c,b.realItems[c]))};b.extra&&b.extra.topItem&&(c("top",b.extra.topItem),b.realItems.top=b.extra.topItem);for(var d=0,e;e=b.items[d];d++)c(d,e);b.extra&&b.extra.bottomItem&&(c("bottom",b.extra.bottomItem),b.realItems.bottom=b.extra.bottomItem);$(b.el).addClass("contextMenu").html(a.join(""));b.autoel&&$(b.el).appendTo("body");M.UI.Container.prototype.render.call(this)}});
M.UI.MultiSelectionMenu=M.UI.Menu.extend({singleSelect:!0,xtype:"multiselectionmenu",init:function(){this.on("afterRender",function(){$(this.el).find(".checked").each(function(){$(this).parent().addClass("selected")})});M.UI.Menu.prototype.init.call(this)},onItemClick:function(a,b,c,d){var e=!0;if($(d.target).hasClass("check")||$(d.target).parent().hasClass("check"))e=!1;if(this.singleApply&&e)this.fire("itemClick",b,c),this.close();else return d=$(a).find(".check"),d.toggleClass("checked"),$(a)[d.hasClass("checked")?
"addClass":"removeClass"]("selected"),this.fire("itemSelect",b,c),!1},getSelectionItem:function(a){var b=[],c=this;$(this.el).find("li.selected").each(function(){var d=$(this).data("index");a&&(d=a(d));b.push(c.items[d])});return b},genItemHtml:function(a,b){var c=[],d=b.renderer||this.genItemInnerHtml;c.push('<li data-index="'+a+'"  class="menu-item ');b.cls&&c.push(b.cls);c.push(' ">');c.push('<a href="javascript:void(0)" class="check ');c.push((b.checked?"checked":"")+'">');c.push('<span></span></a><span class="Mspan">');
c.push(d(a,b));c.push("</span></li>");return c.join("")},genItemInnerHtml:function(a,b){return b.text.encodeHTML()},update:function(a,b){var c=M.UI.Menu.prototype.update.call(this,a,b);$(c).hasClass("selected")&&$(c).find(".check").addClass("checked")}});
M.UI.ComboList=M.UI.Component.extend({init:function(){var a=this;this.bbar&&(a.renderbbar(),a.on("show,selectItem,unSelectItem,selectAll,unSelectAll",function(){a.showBbar()}),a.on("close",function(){a.bbarel.hide()}),a.on("selectItem,unSelectItem",function(){a.barSelectCheck()}),a.on("barhide",function(){a.hideBbarGroup()}));a.el.delegate(".list_selection_item","mouseover",function(){a.fire("mouseover",this)});a.el.delegate(".list_selection_item","mouseout",function(){a.fire("mouseout",this)});if(a.drageTo){var b=
!1,c=!1,d=!1,e=null,g=!1,b=function(b){if(c){if(!d){d=document.createElement("div");d.style.cssText="position:absolute;z-Index:9999;background:#FFF;border:1px #CCC dashed";var f=$(e).clone();d.style.height=$(e).height()+"px";d.style.width=$(e).outerWidth()+"px";d.className="list_item records-list";$(d).append(f);document.body.appendChild(d)}d.style.top=b.pageY+"px";d.style.left=b.pageX+"px";$(a.drageTo).each(function(){if(b.target==this||0<$(this).find(b.target).length)return g=this,$(this).addClass("drageon"),
!1;$(this).removeClass("drageon");g=null})}return!1},f=function(){$(document.body).unbind("mousemove",b).unbind("mouseup",f);d&&(document.body.removeChild(d),d=null,g&&a.fire("dragesuccess",e,g),g=e=null);c=!1};a.el.delegate(".list_selection_item","mousedown",function(a){if(1==a.which)return $(document.body).bind("mousemove",b),$(document.body).bind("mouseup",f),e=this,c=!0,!1})}},closeBbar:function(){this.bbarel.hide();this.fire("barhide");this._dounselectall()},showBbar:function(){0<this.getSelectedItems().length?
(this.bbarel.show(),this.fire("barshow")):this.closeBbar()},hideBbarGroup:function(){$(".bbar_group",this.bbarel).hide().find("a.check").removeClass("checked")},getSelectedItems:function(){var a=[];this.el.find(".list_selection_item.selected").each(function(){$(this).hasClass("hide")||a.push($(this).data("id"))});return a},_dounselectall:function(){$(this.el).find(".list_selection_item").removeClass("selected");$(this.el).find(".list_selection_item a.check").removeClass("checked");$("a.checkAll",
this.bbarel).removeClass("checked")},selectAll:function(){$(this.el).find(".list_selection_item").each(function(){$(this).hasClass("hide")||$(this).addClass("selected")});$(this.el).find(".list_selection_item a.check").addClass("checked");$("a.checkAll",this.bbarel).addClass("checked");this.fire("selectAll")},unSelectAll:function(){this._dounselectall();this.fire("unSelectAll")},genBtn:function(a,b){var c=b.text;b.renderer&&(c=b.renderer.call(this,b));var d=[];d.push('<li data-index="'+(a-1)+'"');
b.cls&&d.push(' class="'+b.cls+'" ');d.push('><a href="javascript:void(0);"><span>'+c+"</span><s></s></a></li>");return d.join("")},updateItem:function(a,b){var c=this.bbar.items;"number"==typeof a&&(c[a]="function"==typeof b?b.call(this,c[a]):b,$(this.bbarel).find("li:eq("+a+")").replaceWith(this.genBtn(a+1,c[a])))},renderbbar:function(){var a=this;a.bbarel||(a.bbarel=$(M.C("div")).appendTo(a.el));var b=['<div class="some_btns">'];b.push('<div class="some_innder">');b.push('<ul class="out_group clearfix">');
for(var c=0,d;d=this.bbar.items[c++];)b.push(this.genBtn(c,d));b.push("</ul>");this.bbar.selectBtn&&b.push('<a class="check checkAll" href="javascript:;"><span></span></a>');b.push("</div></div>");this.bbarel.html(b.join("")).hide();this.bbarel.find(".out_group").delegate("li","click",function(){var b=parseInt($(this).data("index")),b=a.bbar.items[b];if(b.handler)return b.handler.call(a,this,b.text)});a.el.delegate(".list_selection_item .check","click",function(){$(this).toggleClass("checked").parents(".list_selection_item").toggleClass("selected");
a.fire($(this).hasClass("checked")?"selectItem":"unSelectItem");return!1}).delegate(".list_selection_item","click",function(){var b=$(this).data("id");a.listid!=b&&(a.el.find(".list_selection_item").removeClass("current"),$(this).addClass("current"),a.fire("itemClick",b))});$("a.checkAll",a.bbarel).click(function(){var b=$(this);b.hasClass("checked")?(b.removeClass("checked"),a.unSelectAll(),a.fire("unSelectAll")):(b.addClass("checked"),a.selectAll(),a.fire("selectAll"));return!1})},barSelectCheck:function(){var a=
$("a.checkAll",this.bbarel),b=$(this.el).find(".list_selection_item").length,c=$(this.el).find(".list_selection_item.selected").length;b===c?a.addClass("checked"):a.removeClass("checked")}});
$(function(){var a=function(a){var b=$(a).val();return 0===b.length||b==$(a).attr("placeholder")},b=function(){a(this)&&$(this).data("original-font-color")&&($(this).val(""),$(this).css("color",$(this).data("original-font-color")),$(this).removeData("original-font-color"))},c=function(){if(a(this)){var b=$(this).attr("placeholder");$(this).val(b);$(this).data("original-font-color",$(this).css("color"));$(this).css("color","rgb(169,169,169)")}},d="placeholder"in document.createElement("input");$.fn.miPlaceholder=
function(){d||this.each(function(a,d){d=$(d);d.attr("placeholder")&&(d.focus(b),d.blur(c),d.trigger("blur"))})}});M.Service={};M.Model={};M.data={};M.MiCloud={};
M.data.Store=M.extend(M.Object,{autoload:!1,pageSize:100,currentPage:0,totalPage:0,dataTotal:"total",method:"GET",url:"",init:function(){this.data=[];this.on("load",this.onload);this.autoload&&this.load();for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var c=a[b].split("=");2<=c.length&&"serviceToken"==c[0].trim()&&(c.shift(),this.token=c.join("="))}},onload:function(a){this.data=a},load:function(a){var b=this;a||(a={});"GET"==b.method.toUpperCase()&&(a._dc=(new Date).getTime());this.defaultParams&&
M.merge(a,this.defaultParams);b.getUrl&&(b.url=b.getUrl.call(b,a));"POST"==b.method.toUpperCase()&&(a.serviceToken=this.token);$.ajax({url:M.template(b.url,{uuid:M.system.uuid}),type:b.method,dataType:"json",data:a,success:function(a){a.code==0?b.fire("load",a.data):b.fire("loadErr",a.description);b.fire("requestComplete")},error:function(){b.fire("requestError");b.fire("requestComplete")}})}});
(function(a){a.Service.PullService=a.extend(a.Object,{live:!1,interval:5E3,url:"",lock:0,maxInterval:9E5,minInterval:5E3,intervalStep:500,init:function(){var b=this;b.ruleKeys={};b.ruleProxy=new a.Object;b.store=new a.data.Store({url:b.url});b.store.on("load",function(c){var d={},e;for(e in c)b.ruleProxy.fire(e,c[e].data),"lastPage"in c[e].data&&(c[e].data.lastPage||(d[e]=b.ruleKeys[e]));$.isEmptyObject(d)?(b.lock=0,b.requestTime=setTimeout(function(){b.run()},b.interval)):setTimeout(function(){b.store.load({data:a.Util.decodeJSON(d)})},
100)});b.store.on("requestError",function(){b.requestTime=setTimeout(function(){b.run()},b.interval)});b.on("active",function(){2E4<b.interval&&(window.clearTimeout(b.requestTime),b.run());b.interval=b.minInterval})},run:function(){this.lock||(this.live=this.lock=1,this.request())},request:function(){var b=this;$.isEmptyObject(this.ruleKeys)?b.requestTime=setTimeout(function(){b.run()},b.interval):this.store.load({data:a.Util.decodeJSON(this.ruleKeys)});b.interval+=b.intervalStep;b.interval>b.maxInterval&&
(b.interval=b.maxInterval)},addRule:function(a,c,d){if(!this.ruleKeys[a])this.ruleProxy.on(a,d);this.ruleKeys[a]=c;this.live||this.run()},removeRule:function(a){this.ruleProxy.un(a);delete this.ruleKeys[a]},updateRule:function(a,c){this.ruleKeys[a]=c}})})(M);
(function(a){a.Service.System=a.extend(a.Object,{oldSystem:"",oldHash:"",init:function(){var b=this;b.pullService=new a.Service.PullService({url:"/sync/{uuid}/full"});if(!("onhashchange"in window)||8>document.documentMode){var c=location.hash,d=function(){location.hash!=c&&(window.onhashchange(),c=location.hash);setTimeout(d,100)};d()}window.onhashchange=function(){b.switchSubSystemSync(location.hash)};this.subSystemHash={};this.subSystemReg={};setTimeout(function(){b.oldSystem||b.switchSubSystemSync(location.hash)},
50);this.on("mousedown,keydown",function(){b.pullService.fire("active")});$(function(){var a=location.hash,c="#"+b.defaultSysttem;location.hash=c;if(1<a.length&&a!=c){var d=function(j){["#",j].join("")==c&&(location.hash=a);b.un("switchSystem",d)};b.on("switchSystem",d)}})},defaultSysttem:"contact",switchSubSystem:function(a){if(a==this.oldHash)return!1;this.oldHash=a;a=a.split("#")[1];if(!a)return!1;var a=a.replace(/^#/,""),c=a.split("/"),a=c.shift(),c=c.join("/");this.subSystemReg[a]&&(this.oldSystem==
a?this.subSystemHash[this.oldSystem].switchMoudle(c):(this.oldSystem&&this.oldSystem in this.subSystemHash&&this.subSystemHash[this.oldSystem].close(),a in this.subSystemHash||(this.subSystemHash[a]=new this.subSystemReg[a]),this.subSystemHash[a].show(c),this.fire("switchSystem",a),this.oldSystem=a))},id:100,getModel:function(a,c){var d;"mkey"in a.prototype?d=a.prototype.mkey:(d="mkey"+this.id++,a.prototype.mkey=d);this.modelHash||(this.modelHash={});d in this.modelHash||(this.modelHash[d]=new a(c));
return this.modelHash[d]},regSystem:function(a,c){this.subSystemReg[a.trim()]=c},removeSystem:function(a){delete this.subSystemReg[a]},runPull:function(){this.pullService.run()},require:function(b,c,d){this.cached=this.cached||{};"function"==typeof c&&(d=c,c="");if(!this.cached[b]){var e=new a.UI.Dialog({title:"\u52a0\u8f7d\u4e2d",html:'<div class="load"><s class="loading">'+(c||"\u6b63\u5728\u52a0\u8f7d...")+"</s></div>",closable:!1,modal:!0,width:400});this.cached[b]="loaded";a.getScript(b+"#",
function(){e.close();d()})}},switchSubSystemSync:function(a){c=a.split("#")[1];if(!a)return!1;var c=c.replace(/^#/,""),c=c.split("/"),d=this.subSystemReg[c[0]].prototype;if(d.status&&"loaded"==d.status)this.switchSubSystem(a);else if(!d.status&&d){var e=this;e.last=a;e.require(d.url,d.msg,function(){d.status="loaded";e.last==a&&e.switchSubSystem(a)})}}});a.system=new a.Service.System})(M);
(function(){var a=M.extend(M.Object,{key:"mdata",_read:function(){var a=window.localStorage.getItem(this.key+M.system.uuid);try{a=(new Function("","return "+a))()}catch(c){}return"object"!==typeof a?{}:a||{}},_save:function(a){try{window.localStorage.setItem(this.key,JSON.stringify(a))}catch(c){}},_readAndGc:function(a){var c=this._read(),d;for(d in c){var e=c[d];e.expires&&(new Date).getTime()-e.time>=e.expires&&delete c[d]}this._save(c);return a?c[a]:c},remove:function(a){delete this._readAndGc()[a]},
get:function(a){return this._readAndGc(a)||null},set:function(a,c,d){if(!a)return!1;var e=this._readAndGc(),g=(new Date).getTime();e[a]={value:c,expires:d,time:g};this._save(e)}});M.storage=new a})();
M.UI.Driver=M.UI.Component.extend({init:function(){this.moudles||(this.moudles={});this.render();this.listen()},closed:!1,setTitle:function(a){a=a?a:this.title;document.title=a?a:"\u5c0f\u7c73\u8054\u7cfb\u4eba"},show:function(a){$(this.el).show();this.closed=!1;this.oldMoudle||(location.hash="#"+this.type+"/"+(a||this.defaultMoudle),this.switchMoudle(a||this.defaultMoudle));this.right&&this.right.show();this.fire("show")},close:function(){$(this.el).hide();this.closed=!0;this.right&&this.right.hide();
this.fire("close")},switchMoudle:function(a){var b=this.moudles;moudles=this.parseHash(a);var c=b[moudles[0]];if(c){if(this.curmd!=moudles[0]){if(this.curmd)for(var d in b)if(a!=d){var e=b[d].entry;e&&e.close()}c.entry||(c.params.ownerCt=this,c.entry=new c.defined(c.params),this.renderItem(c.entry))}this.defaultMoudle=a;c.entry.show(moudles[1]);this.fire("switchModule",c.entry);this.curmd=moudles[0]}},parseHash:function(a){a=a.split("/");return[a.shift(),a.join("/")]},renderItem:function(a){$(this.el).append(a.el)}});
M.UI.SyncComboList=M.UI.ComboList.extend({syncTag:"",startSync:function(){if(this.model&&this.syncTag){var a=this;M.system.pullService.addRule(this.syncTag,this.model.syncParams,function(b){a.model.sync(b)})}},stopSync:function(){this.model&&this.syncTag&&M.system.pullService.removeRule(this.syncTag);this.sync=!1},getAvatar:function(a){return"/file/"+M.system.uuid+"/full?type=ico&fileid="+a},showAvatar:function(a){var b=this;if(a){var c=$("#contact-"+a+" img.avatar");(a=c.data("src"))&&c.attr("src",
b.getAvatar(a))}else $(".aM",b.el).each(function(){var a=$(this).offset().top,c=b.list.height()+b.list.scrollTop();a<=parseInt(c)+10&&($(this).removeClass("aM"),a=$(this).data("id"),(a=b.model.getUserIcon(a))&&$(this).find("img.avatar").attr("src",b.getAvatar(a)))})},sync:!1,closeDetail:function(){this.right&&this.right.html("");this.currentDetail=null;this.fire("closeDetail")},show:function(a){if(a)if(this.model.complete)this.showDetail(a);else{var b=this;this.model.on("loadComplete",function(){b.showDetail(a)})}else this.closeDetail&&
this.closeDetail();this.el.show();this.right&&this.right.show();this.model&&!this.sync&&(this.model.loaded?this.startSync():(b=this,this.model.on("load",function(){setTimeout(function(){b.startSync()},100);return!1})),this.sync=!0);this.closed=!1;this.fire("show")},close:function(){this.el.hide();this.right&&this.right.hide();this.closed=!0;this.fire("close")}});
M.UI.Template=function(){return{engine:function(a,b){if(!b)return!1;var c={};return function(a,b){var g=!/\W/.test(a)?c[a]=c[a]||this.$_MSTMPL(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?
g(b):g}(a,b)},html:function(a,b,c){a=c?a:this.tmpl[a];b=b||{};return this.engine(a,b)},overwirte:function(a,b){this.tmpl.key=b},tmpl:{smsframe:'<div id="smsLeft" class="mid_content">      <div class="search">      <div class="inner_input" style="display:none">      <input class="input_key" type="text" placeholder="\u641c\u7d22\u77ed\u4fe1"/>      </div>      </div>      <div class="sms_tabs">      <ul class="sms_ul">      <li class="sms_li active"><a href="#sms/full"  id="sms_full">\u5168\u90e8</a></li>      <li class="sms_li"><a href="#sms/locked"  id="sms_locked">\u6536\u85cf</a></li>      <li class="sms_li"><a href="#sms/deleted" id="sms_deleted">\u5df2\u5220\u9664</a></li>      </ul>      <div class="sms_edit"><\!--<a href="javascript:void(0)" onclick="return false;" id="addSms">\u7f16\u8f91</a>--\></div>      </div>      <div>      <div class="records-list sms_list_bottom" id="sms_frame"></div>      </div>      </div>',
AuthLock:'<div width="100%"></div>',smsfav:'<div class="save_bubbox list_selection_item" id="lockedsms_<%=id%>" data-id="<%=id%>">      <div class="save_div">      <div class="save_bubble min_H"><p><%=snippet%></p>      <div class="sms_bubexe">      <a href="javascript:void(0)" class="save_exestar"><span></span></a>      <a href="javascript:void(0)" class="save_exedel" title="\u53d6\u6d88\u6536\u85cf"><span></span></a>      </div>      </div>      </div>      <div class="save_msgtime">\u6536\u85cf\u81ea<%=recipients%>,<%=time%></div>      </div>',
smsdel:'<li id="thread-deleted-<%=threadId%>" data-id="<%=threadId%>" class="list_selection_item list_unfilter">      <img src="https://land.xiaomi.net/img/micloud/contact_twonew.png" class="useravatar">      <div class="content">      <div class="records_hp">      <span class="records-name usernickname"><%=recipients%></span>      </div>      <p class="cont_p"><%=snippet%></p>      <p class=""><span><%=time%></span></p>      </div>      <a class="check" href="javascript:void(0)"><span></span></a>      </li>',
smsitem:'<li id="thread-<%=type%>-<%=threadId%>" data-id="<%=threadId%> " class="list_selection_item">      <img src="https://land.xiaomi.net/img/micloud/contact_twonew.png" class="useravatar"/>      <div class="content">      <div class="records_hp"><span class="records-name usernickname">      <%=contactInfo%></span>          <%if (total > 1){ %>      <span class="num_pop num_nobg"><s id="sms_single_num_<%=threadId%>">(<%=total%>)</s></span>      <% } %>      </div>      <p class="cont_p"><%=snippet %></p>      <p><span><%=time%></span></p>      </div>      <a class="check" href="javascript:void(0)"><span></span></a></li>',
smsitem2:'<div class="<%if(entry.folder){%>send <%}else{%>receive<% } %> clearfix list_selection_item" id="sms_<%=entry.id%>" data-id="<%=entry.id%>"><div class="sms_bubbox sms_o clearfix <%if(!!entry.folder){%> sendentry<%}else{%>receiveentry<% } %>" >     <a class="check" onclick="return false;" href="javascript:void(0)"><span></span></a>     <div class="sms_bubble <%if(!!entry.folder&&entry.status==1) {%> sms_error <%}%><%if(entry.type ==1) {%>is-mms<% } %>">     <s></s>     <%if(entry.type ==1) {%>     <div class="sms_img"><b></b><img src="https://land.xiaomi.net/img/micloud/mms_img3.png" width="80" height="80"></div>     <% } else {%><% } %>     <a class="sms_actionmask<%if(entry.locked) {%> sms_star<% } %>"></a>     <p><%=body%></p>     <div class="sms_bubexe sms_action" >     </div>     </div>     </div></div>',
smsitemfav:'<div class="save_bubbox list_selection_item list_unfilter" id="lockedsms_<%=id%>" data-id="<%=id%>">      <div class="save_div">      <div class="save_bubble clearfix">      <%if(pduLink||pduRawlink){%>      <div class="sms_img"><b></b><img src="https://land.xiaomi.net/img/micloud/mms_img3.png" width="80" height="80" /></div>      <% } %>      <p><%=body%></p>      <div class="sms_bubexe">      <a href="javascript:void(0)" class="save_exestar"><span></span></a>      <a href="javascript:void(0)" class="save_exedel" title="\u53d6\u6d88\u6536\u85cf"><span></span></a>      </div>      </div>      </div>      <div class="save_msgtime"><%=contactInfo%><%=time%></div></div>',
smsdetail:'<div class="sms_detail">      <div class="sms_who">      <span class="sms_name<%if( !!cid ){%> usernickname" data-did = "<%=cid%>" <% }else{ %>"<% } %>>      <%if(contact){%><%=username%><% } else {%><%=recipients%><% } %>      </span>      <span class="sms_num">      <em><%if(contact){%><%=orgNumber%><% } else { %><%if(orgNumber != recipients) {%><%=orgNumber%><% } %><% } %></em>\t  <% if(vaildNumber>1){%>      (<em><%=vaildNumber%></em>)<a href="javascript:void(0)">\u66f4\u591a\u8054\u7cfb\u65b9\u5f0f</a>      <%}%>      </span>      <div class="sms_number_menu"></div>      <div class="sms_avatar"><a href="#contact/index/<%if(contact){%><%=contact.id%><%}else{%>ph<%=orgNumber%><%}%>" target="_self"><img src="<%if(sp&&!contact){%>https://land.xiaomi.net/img/micloud/<%=sp%>.png<%}else{%><%=icon%><%}%>"  width="80" height="80" /></a></div>      </div>      <div class="sms_timeline">      <%if(renderType=="full"){%><s class="sms_timeline_trigger"></s><% } %>      <div class="sms_loadtime" style="display:none">\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u5019\u22ef\u22ef</div>      </div>      <div id="sms_timeline_container"></div>      <div class="sms_dial" id="sms_dial">\u6b63\u5728\u8bfb\u53d6...</div>      </div>',
timeline:'<div class="mid_time" id="<%=id%>" style="min-height:500px;position:absolute; top:<%=top%>; left:<%=left%>;">        <div class="pad_10">          <div class="adv_nav">            <a href="#contact/index" class="js_time_nav js_backto_list">\u901a\u8baf\u5f55</a>&nbsp;&gt;&nbsp;            <a href="#contact/advanced" class="js_time_nav">\u9ad8\u7ea7\u529f\u80fd</a>&nbsp;&gt;&nbsp;<a href="javascript:void(0)" class="orange">\u65f6\u5149\u673a</a>          </div>          <div class="reset_time">            <p>\u8bf7\u9009\u62e9\u4f60\u8981\u6062\u590d\u901a\u8baf\u5f55\u7684\u65f6\u95f4\u70b9<a href="javascript:void(0)" id="timeline_setting">\u81ea\u5b9a\u4e49</a></p>            <ul class="clearfix" id="timeline_list">              <li index="0" time="5184000000"><a href="javascript:void(0)" class="js_timeline_point" index="0"></a></li>              <li index="1" time="2592000000"><a href="javascript:void(0)" class="js_timeline_point" index="1"></a></li>              <li index="2" time="604800000"><a href="javascript:void(0)" class="js_timeline_point" index="2"></a></li>              <li index="3" time="86400000"><a href="javascript:void(0)" class="js_timeline_point" index="3"></a></li>              <li index="4" time="3600000"><a href="javascript:void(0)" class="js_timeline_point" index="4"></a></li>              <li index="5" time="600000"><a href="javascript:void(0)" class="js_timeline_point" index="5"></a></li>              <li index="6" time="0" class="click"><a href="javascript:void(0)" class="js_timeline_point" index="6"></a></li>            </ul>            <div class="time_zi" id="timeline_chn">            </div>            <div class="time_tips" id="time_tips" style="position:static">              <div class="time_corner" id="time_arrow" style="top:210px;"></div>              <p class="clearfix">                <span>                 <span id="current_time"></span><span id="timeline_dec_line">&nbsp;-&nbsp;</span><em id="current_contact"></em>\u4e2a\u8054\u7cfb\u4eba\uff0c<em id="current_group"></em>\u4e2a\u7fa4\u7ec4</span>                 <span id="current_status"></span></span>                <a href="javascript:void(0)" class="btn js_back_to_time">\u8fd8\u539f\u5230\u8fd9\u4e2a\u65f6\u95f4\u70b9</a>             </p>            </div>          </div>        </div>      </div>',
contactFrame:'<div id="frame-Contact"  class="mid_content">      <div class="top_pos">        <div class="search">          <div class="inner_input">            <div class="input_bg">              <input class="input_key" id="searchContact" type="text" placeholder="\u641c\u7d22\u8054\u7cfb\u4eba"/>              <s class="xiaocha"></s>            </div>          </div>        </div>        <div class="list_title">          <a href="javascript:void(0)" class="all_contacts"><span>\u5168\u90e8\u8054\u7cfb\u4eba</span><em id="contactscount">\uff080\uff09</em><s class="Triangle">\u5206\u7ec4</s></a>          <a href="javascript:void(0)" class="add_contact" id="add_contact">           <span class="add_cmd">\u65b0\u589e</span>            <span class="tip_add">              <s></s>              <span class="tip_cont">\u6dfb\u52a0\u8054\u7cfb\u4eba</span>            </span>          </a>          <a href="#contact/advanced" class="tool_contact">\u8bbe\u7f6e</a>          <ul class="sub_sel hide">            <li><a href="javascript:void(0)">\u5168\u90e8\u8054\u7cfb\u4eba(<em >0</em>)</a></li>            <li class="new_add"><a href="javascript:void(0)" class="new_grp">\u65b0\u5efa\u5206\u7ec4</a></li>          </ul>        </div>      </div>      <div class="overF" id="contactListFrame">      <div class="load">        <s class="loading">\u6570\u636e\u52a0\u8f7d\u4e2d...</s>      </div>      </div><\!-- end overF --\>      </div>',
contactList:'<%if(data.istitle) {%>     <li class="let" style="position:absolute;top:<%=top%>px" id="lt-<%=data.title%>"><div class="let-title"><%=data.title%></div></li>     <% } else {%>     <% if(!data.hideItem) {%>     <li class="contact list_selection_item <%if(data.photos){%>aM<%}%> <%if(itemChecked) {%>selected<% } %>" id="contact-<%=data.id%>" data-id="<%=data.id%>" style="position:absolute;top:<%=top%>px">  <div class="list-selection-item-warp"><div class="citem">  <div class="list_avatar">  <img src="<%=data.icon%>" class="avatar" onerror="this.src=&quot;https://land.xiaomi.net/img/micloud/contact_two.png&quot;">  </div>  <div class="category">    <%for(var i=0;i<data.catData.length;i++) {%>    <a href="javascript:;" class="ct_link" data-catid="<%=data.catData[i].cid%>"><%=data.catData[i].name%></a>    <% } %>  </div>  <h4 class="nickname"><%=data.nickname%></h4>  </div>  <a href="javascript:void(0)" pid="<%=data.id%>" class="chkbox-<%=data.id%> check <%if(itemChecked) {%>checked<% } %>">    <span></span>  </a></div></li><% } %><% } %>',
contactList_new:'<%if(data.istitle) {%>     <li class="let" style="position:absolute;top:<%=top%>px" id="lt-<%=data.title%>"><div class="let-title"><%=data.title%></div></li>     <% } else {%>     <% if(!data.hideItem) {%>     <li class="contact list_selection_item <%if(data.photos){%>aM<%}%> <%if(itemChecked) {%>selected<% } %>" id="contact-<%=data.id%>" data-id="<%=data.id%>" style="position:absolute;top:<%=top%>px">  <div class="list-selection-item-warp"><div class="citem">  <div class="list_avatar">  <img src="<%=data.usericon%>" class="avatar" onerror="this.src=&quot;https://land.xiaomi.net/img/micloud/contact_two.png&quot;">  </div>  <div class="category">  <%for(var i=0;i<data.groups.length;i++) {%>  \t<%if(data.groups[i]!==undefined){%>    \t<a href="javascript:;" class="ct_link" data-catid="<%=data.groups[i].id%>"><%=data.groups[i].title%></a>    <% } %>   <% } %>  </div>  <h4 class="nickname"><%=data.username%></h4>  </div>  <a href="javascript:void(0)" pid="<%=data.id%>" class="chkbox-<%=data.id%> check <%if(itemChecked) {%>checked<% } %>">    <span></span>  </a></div></li><% } %><% } %>',
contactAdv:'<div class="mid_content" id="advanced_frame">        <div class="pad_10">          <div class="adv_nav">            <a href="#contact/index"  class="js_backto_list">\u901a\u8baf\u5f55</a> &gt; <a href="javascript:void(0)" class="orange">\u9ad8\u7ea7\u529f\u80fd</a>          </div>          <div class="adv_content">            <ul>              <li>                <div class="adv_descrip">                <h2 class="swich_h">\u4ec5\u663e\u793a\u6709\u7535\u8bdd\u7684\u8054\u7cfb\u4eba</h2>                      <div class="swich_button">                        <a href="javascript:void(0)">\u9009\u62e9\u6309\u94ae</a>                      </div>                </div>              </li>              <li style="display:none">                <div class="adv_descrip">                  <h2>\u5bfc\u5165\u8054\u7cfb\u4eba</h2>                  <p>\u6211\u4eec\u652f\u6301\u5bfc\u5165\u6765\u81ea\u5176\u5b83\u5e94\u7528\u7a0b\u5e8f\u6216\u624b\u673a\u7684CSV\u3001vCard\u6587\u4ef6\u3002</p>                  <div class="btn gray"><input type="button" id="importcontact" value="\u5bfc\u5165\u8054\u7cfb\u4eba" class=""></div>              </li>              <li style="display:none">                <div class="adv_descrip">                  <h2>\u5bfc\u51fa\u8054\u7cfb\u4eba</h2>                  <p>\u60a8\u53ef\u4ee5\u5bfc\u51fa\u60a8\u7684\u8054\u7cfb\u4eba\u5e76\u4fdd\u5b58\u4e3aCSV\u6216vCar\u683c\u5f0f\uff0c\u4ee5\u4f5c\u4ed6\u7528\u3002</p>                  <div class="btn gray"><input id="exportcontact" type="button" value="\u5bfc\u51fa\u8054\u7cfb\u4eba" class=""></div>                </div>              </li>              <li>                <div class="adv_descrip" >                  <h2>\u6062\u590d\u901a\u8baf\u5f55</h2>                  <p>\u5982\u679c\u51fa\u73b0\u610f\u5916\u6216\u8bef\u5220\u6570\u636e\uff0c\u60a8\u53ef\u4ee5\u5c06\u901a\u8baf\u5f55\u6062\u590d\u5230\u4e4b\u524d\u7684\u72b6\u6001\u3002</p>                  <div class="btn gray" id="revertcontact"><input type="button" value="\u6062\u590d" class=""></div>                </div>              </li>            </ul>          </div><\!-- end adv_content --\>        </div><\!-- end pad_10 --\>      </div>',
timelinepopup:'<div><select class="ce-data timeline_popup_sel" data-key="type" id="timeline_popup_day" type="day"></select>\u5929      <select class="ce-data timeline_popup_sel" data-key="type" id="timeline_popup_hour" type="hour"></select>\u5c0f\u65f6      <select class="ce-data timeline_popup_sel" data-key="type" id="timeline_popup_minutes" type="minute"></select>\u5206\u949f\u524d</div>      <div><input type="hidden" id="timeline_popup_hidden" value="0">      <span id="timeline_popup_time" current="0" class="timeline-popup-1"><%=time%></span>      <span id="timeline_popup_info" class="timeline-popup-2"></span><span id="timeline_popup_status" class="timeline-popup-3"></span></div>',
myphone:'<div class="no_bindphone"><div class="no_bind_con"><p>\u60a8\u7684\u624b\u673a\u8fd8\u6ca1\u6709\u5f00\u542f\u627e\u56de\u624b\u673a\u529f\u80fd<br>        <a href="javascript:void(0);" id="how_open">\u5982\u4f55\u5f00\u542f</a></p></div></div>        <div class="pm_layout"><div class="pm_header">        <div id="phone_stat"></div>        <div class="phone_operation"><a class="pho_button gray" data-cmd="noise" href="javascript:void(0);">\u53d1\u58f0</a>        <a class="pho_button gray" href="javascript:void(0);" data-cmd="lock">\u9501\u5b9a\u624b\u673a</a>        <a class="pho_button gray" href="javascript:void(0);" data-cmd="wipe">\u64e6\u9664\u6570\u636e</a></div></div>        <div class="pm_pos">          <div class="pm_nowposition"><span>\u624b\u673a\u4f4d\u7f6e\u4fe1\u606f</span></div>          <div class="pm_location"><a class="pho_button btnyellow" href="javascript:void(0);">\u5b9a\u4f4d\u624b\u673a</a></div>       </div>        <div id="phone_map_con" class="pm_con" style="height:300pxi;position:relative">        </div>',
mapError:'<div class="map-unavailable">          <div class="map-unavailable-con">          <img width="343" height="230" src="https://land.xiaomi.net/img/micloud/map-unavailable2.jpg">          <p><span>\u4eb2\uff0c{mapt}\u5730\u56fe\u4e0d\u53ef\u7528\u4e86\u3002</span><br><a href="javascript:void(0)" ></a></p>          </div>          </div>',smsSend:'<div data-id="<%=id%>" id="sms_<%=id%>" class="send  clearfix list_selection_item">        \t\t<div class="sms_bubbox sms_o clearfix  sendentry">        \t\t\t<a href="javascript:void(0)" onclick="return false;" class="check"><span></span></a>        \t\t\t<div class="sms_bubble">        \t\t\t\t<s></s>        \t\t\t\t<a class="sms_actionmask"></a>        \t\t\t\t<p><%=body%></p>        \t\t\t\t<div class="sms_bubexe sms_action" style="display: none;">        \t\t\t\t\t<a title="\u6536\u85cf" class="sms_exestar" href="#"></a>        \t\t\t\t\t<a title="\u5220\u9664" class="sms_exedel" href="#"></a>        \t\t\t\t</div>        \t\t\t</div></div></div>',
smsEditor:'<div class="some_btns web_message" id="sms_editor_frame"><div class="fa_pos">\t\t\t\t\t    <div class="gif_img pno-emotion" id="sms_emotion_button" style="display:none"></div>\t\t\t\t        <div class="use_phones" id="phone_list_trigger">\t\t\t\t\t      <span class="use_zi">\u4f7f\u7528: <span id="current_number">13594939586</span></span><span class="use_corner"></span>\t\t\t\t\t    </div>\t\t\t\t            <div class="menu_wrap" id="sms_send_list" style="display:none">\t\t\t\t              <div style="width:200px; height:249px;" id="phone_container_warp">\t\t\t\t                <p class="check_num_p">\u9009\u62e9\u53d1\u9001\u77ed\u4fe1\u7684\u53f7\u7801</p>\t\t\t\t\t\t\t\t<div class="menuel" style="width:200px; overflow-y:auto; height:200px;" id="phone_container"></div>\t\t\t\t\t\t\t  </div>\t\t\t\t\t\t\t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div class="write_message">\t\t\t\t\t    <div class="write_div" id="sms_rich_frame" style="border:1px solid #CCC">\t\t\t\t\t      <div id="sms_send_textarea">\u56de\u590d\u77ed\u4fe1</div>\t\t\t\t\t    </div>\t\t\t\t\t    <div class="btn write_sent" id="sms_send_button">\t\t\t\t\t      <input type="submit" value="\u53d1\u9001">\t\t\t\t\t    </div>\t\t\t\t\t  </div>        \t\t\t</div>'}}}();
M.system.uuid=$("#username").attr("uuid");M.system.on("switchSystem",function(a){$(".nav .tabs li").removeClass("current");$("#"+a+"_nav").addClass("current")});function windowResize(){var a=$("body"),b=a.get(0),c=b.clientHeight+0;500>c?(a.addClass("minHeight"),c=500):a.removeClass("minHeight");960>=b.clientWidth?a.addClass("minWidth"):a.removeClass("minWidth");M.system.fire("windowresize",c);$("#mid").height(c+"px")}$(window).bind("resize",windowResize);$.ready(windowResize);
M.system.onwindowresize=function(a){if(a)M.system.on("windowresize",a);windowResize()};M.system.on("switchSystem",function(a){$(".nav .current").removeClass("current");$("#"+a+"_nav").addClass("current")});
$(function(){$("body").bind("mousedown",function(a){M.system.fire("mousedown");var c=a.target;$(".autoclose").each(function(){var a=$(this).data("except");if(a){var b=0;$(a).each(function(){1==this.nodeType&&9==this.nodeType&&jQuery.contains(this,c)&&(b=1)});if(1==b)return 1}jQuery.contains(this,c)||$(this).addClass("hide").removeClass("autoclose")})});$("body").bind("keydown",function(a){M.system.fire("keydown",a.keyCode)});$("#logout").attr("href","https://account.xiaomi.com/pass/logout?userId="+
M.system.uuid+"&sid=micloud&callback="+location.protocol+"//"+location.host);$("#username").attr("href","https://account.xiaomi.com/pass/userInfo?userId="+M.system.uuid).attr("target","_blank");$("#logout").click(function(){new M.UI.Dialog({title:"\u9000\u51fa",closable:!1,width:500,modal:!0,html:"<h2>\u6b63\u5728\u9000\u51fa...</h2>"})});$("#username").html(M.system.uuid);$.ajax({url:"https://account.xiaomi.com/pass/userInfoJsonP?userId="+M.system.uuid,dataType:"jsonp",jsonp:"callback",success:function(a){a.uniqName?
name=a.uniqName:a.miliaoInfo?name=a.miliaoInfo.nickName:a.EM?name=a.EM.address:a.PH&&(name=a.PH.address);name&&$("#username").html(name)}});var a=$("#username");a.html(a.attr("uuid"))});
(function(a){a.UI.ContactFrame=a.UI.Driver.extend({type:"contact",msg:"\u6b63\u5728\u52a0\u8f7d\u8054\u7cfb\u4eba\u6a21\u5757...",title:"\u6211\u7684\u8054\u7cfb\u4eba",url:"https://land.xiaomi.net/res/{CVER}/scripts/micloud/contact.js",defaultMoudle:"index",render:function(){this.el=$(document.createElement("div")).appendTo("#mid");this.right=$('<div id="contactRight"></div>').appendTo("#right")},listen:function(){var b=this;this.on("switchModule",function(a){b.setTitle();a.currentDetail?$("#contactRight").attr("class",
""):$("#contactRight").attr("class",a.bg)});a.system.onwindowresize(function(a){$("#contactRight").height(a)})},init:function(){a.UI.Driver.prototype.init.call(this);this.moudles={index:{defined:a.UI.Contact,params:{bg:"man"}},advanced:{defined:a.UI.ContactAdvanced,params:{bg:"setpng"}}}}});a.system.regSystem("contact",a.UI.ContactFrame)})(M);
M.UI.SMSFrame=M.extend(M.UI.Driver,{closed:!1,url:"https://land.xiaomi.net/res/{MVER}/scripts/micloud/sms.js",rendered:0,test:1,type:"sms",title:"\u6211\u7684\u77ed\u4fe1",defaultMoudle:"full",render:function(){this.el=$(M.UI.Template.tmpl.smsframe).appendTo("#mid");this.right=$('<div id="smsRight"></div>').appendTo("#right")},renderItem:function(a){a.el.appendTo("#sms_frame");a.ownerCt=this},listen:function(){this.on("switchModule",function(a){this.setTitle();this.right.get(0).className=a.detail?
"":a.bg;$(this.el).find(".sms_ul .active").removeClass("active");$(this.el).find("#sms_"+a.type).parent().addClass("active")});var a=this;a.moudles={full:{defined:M.UI.SMS,params:{type:"full",model:M.system.getModel(M.Model.FullMessageThread),syncTag:"sms_thread_full",bg:"messpng",bbar:{selectBtn:!0,items:[{text:"\u5220\u9664\u4f1a\u8bdd",handler:function(){var a=this.getSelectedItems(),c=this;new M.UI.Confirm({title:"\u5220\u9664\u4f1a\u8bdd",msg:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684"+
a.length+"\u7ec4\u77ed\u4fe1\u4f1a\u8bdd\uff1f",width:300,onyes:function(){a.each(function(a,b){c.model.delThread(b)});c.unSelectAll()}})}},{text:"\u6807\u8bb0\u4e3a\u5df2\u8bfb",handler:function(){for(var a=this.getSelectedItems(),c=0,d;d=a[c++];)this.model.read(d);this.unSelectAll()}},{text:"\u53d6\u6d88",handler:function(){this.unSelectAll()}}]},subbbar:{selectBtn:!0,items:[{text:"\u5220\u9664",handler:function(){var a=this.getSelectedItems(),c=this;new M.UI.Confirm({msg:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684"+
a.length+"\u6761\u77ed\u4fe1\u4e48\uff1f",title:"\u5220\u9664\u77ed\u4fe1",width:300,onyes:function(){for(var d=0,e;e=a[d++];)c.model.del(e)}})}},{text:"\u53d6\u6d88",handler:function(){this.unSelectAll()}}]},listen:function(){M.UI.SMS.prototype.listen.call(this);var a=this;a.on("dragesuccess",function(c){c=$(c).data("id");a.model.delThread(c)});a.on("barshow",function(){var c=this.getSelectedItems(),d=!1;this.updateItem(0,function(a){a.text="\u5220\u9664\u4f1a\u8bdd("+c.length+")";return a});for(var e=
0,g;g=c[e++];)a.model.getThread(g).unread&&(d=!0);!1==d?$(this.bbarel).find("li:eq(1)").css("display","none"):$(this.bbarel).find("li:eq(1)").css("display","block");return!0})}}},deleted:{defined:M.UI.SMS,params:{type:"deleted",syncTag:"sms_thread_delete",model:M.system.getModel(M.Model.DeletedMessageThread),bg:"delete",bbar:{selectBtn:!0,items:[{text:"\u6062\u590d\u4f1a\u8bdd",handler:function(){var a=this.getSelectedItems(),c=this;new M.UI.Confirm({msg:"\u4f60\u786e\u5b9a\u8981\u6062\u590d\u9009\u4e2d\u7684"+
a.length+"\u7ec4\u77ed\u4fe1\u4f1a\u8bdd\u5417?",title:"\u6062\u590d\u4f1a\u8bdd",width:300,onyes:function(){for(var d=0,e;e=a[d++];)c.model.restoreThread(e);c.unSelectAll()}})}},{text:"\u5f7b\u5e95\u5220\u9664",handler:function(){var a=this.getSelectedItems(),c=this;new M.UI.Confirm({msg:"\u4f60\u786e\u5b9a\u8981\u5f7b\u5e95\u5220\u9664\u9009\u4e2d\u7684"+a.length+"\u7ec4\u77ed\u4fe1\u4f1a\u8bdd\u5417?",title:"\u6c38\u4e45\u5220\u9664",width:300,onyes:function(){for(var d=0,e;e=a[d++];)c.model.purgeThread(e);
c.unSelectAll()}})}},{text:"\u53d6\u6d88",handler:function(){this.unSelectAll()}}]},subbbar:{selectBtn:!0,items:[{text:"\u6062\u590d",handler:function(){for(var a=this.getSelectedItems(),c=0,d;d=a[c++];)this.model.restore(d)}},{text:"\u5f7b\u5e95\u5220\u9664",handler:function(){var a=this.getSelectedItems(),c=this;new M.UI.Confirm({title:"\u6c38\u4e45\u5220\u9664",msg:"\u4f60\u786e\u5b9a\u8981\u5f7b\u5e95\u5220\u9664\u9009\u4e2d\u7684"+a.length+"\u6761\u77ed\u4fe1\u5417?",width:300,onyes:function(){for(var d=
0;a[d++];)a.each(function(a,b){c.model.purge(b)}),c.unSelectAll()}})}},{text:"\u53d6\u6d88",handler:function(){this.closeBbar()}}]},listen:function(){M.UI.SMS.prototype.listen.call(this);var a=this;a.on("dragesuccess",function(c){c=$(c).data("id");a.model.restoreThread(c)});a.on("barshow",function(){var a=this.getSelectedItems();this.updateItem(1,function(b){b.text="\u5f7b\u5e95\u5220\u9664("+a.length+")";return b})})}}},locked:{defined:M.UI.LockedSMS,params:{bg:"save"}}};M.system.onwindowresize(function(b){setTimeout(function(){a.right.height(b)},
20)})}});M.system.regSystem("sms",M.UI.SMSFrame);
M.UI.ImageFrame=M.UI.Driver.extend({type:"img",title:"\u76f8\u518c",msg:"\u6b63\u5728\u52a0\u8f7d\u56fe\u5e93\u6a21\u5757...",url:"https://land.xiaomi.net/res/{IVER}/scripts/micloud/img.js",defaultMoudle:"all",totalSize:0,init:function(){this.el=$(document.createElement("div")).addClass("photos");this.el_empty=$(document.createElement("div")).addClass("empty").html('<div class="nophoto_bg"><p>\u5f53\u524d\u6ca1\u6709\u4efb\u4f55\u7167\u7247</p></div>');this.el_tabs=$(document.createElement("div")).addClass("sms_tabs").html('<ul class="sms_ul"><li class="sms_li img_all"><a href="#img/all">\u5168\u90e8<em></em></a></li><li class="sms_li img_photo"><a href="#img/photo">\u7167\u7247<em></em></a></li><li class="sms_li img_screenshots"><a href="#img/screenshots">\u622a\u56fe<em></em></a></li></ul><div class="ph_edit"><a href="javascript:" class="ph_t">\u4fe1\u606f</a></div><div class="phtips"></div>');
this.moudles={all:{defined:M.UI.ImageAll,params:{name:"all"}},photo:{defined:M.UI.ImagePhoto,params:{name:"photo"}},screenshots:{defined:M.UI.ImageScreenshots,params:{name:"screenshots"}}};M.UI.Driver.prototype.init.call(this)},show:function(){$("#mid").hide();$("#right").hide();this.el.show();M.UI.Driver.prototype.show.call(this)},close:function(){$("#mid").show();$("#right").show();this.el.hide()},render:function(){this.el.insertAfter("#right");this.el_tabs.hide().appendTo(this.el);this.fire("renderComplete")},
phtips:function(a,b){for(var c={show:["\u5207\u6362\u89c6\u56fe\u6a21\u5f0f"],info:["\u76f8\u518c\u7a7a\u95f4\u5df2\u4f7f\u7528{rate}MB"]}[a],d=[],e=0,g;g=c[e++];)d.push('<li class="t'+e+'"><i/><span>'+M.template(g,b)+"</span></li>");return'<ul class="img_tablist_'+a+'"><s/>'+d.join("")+"</ul>"},listen:function(){var a=this;a.on("switchModule",function(b){a.name=b.name;this.setTitle();$(".active",a.el).removeClass("active");$(".img_"+b.name,a.el).addClass("active")});var b=a.el_tabs.find(".phtips");
a.el_tabs.find(".ph_edit .ph_t").hover(function(){b.html(a.phtips("info",{rate:Math.round(100*(a.usedSize/1024/1024))/100}))},function(){b.html("")})}});M.system.regSystem("img",M.UI.ImageFrame);$('<li id="img_nav"><a class="pic" href="#img">\u76f8\u518c</a></li>').insertAfter("#sms_nav");
M.UI.PhoneFrame=M.extend(M.UI.Driver,{type:"phone",title:"\u627e\u56de\u624b\u673a",msg:"\u6b63\u5728\u52a0\u8f7d\u627e\u56de\u624b\u673a...",url:"https://land.xiaomi.net/res/{PVER}/scripts/micloud/phone.js",defaultMoudle:"myphone",init:function(){this.el=$(M.C("div")).addClass("phoneFrame");this.moudles={myphone:{defined:M.UI.Phone,params:{name:"myphone"}}};M.UI.Driver.prototype.init.call(this);this.setTitle()},render:function(){this.el.insertAfter("#right");this.fire("phoneRendered")},show:function(){$("#mid").hide();
$("#right").hide();this.el.show();M.UI.Driver.prototype.show.call(this)},close:function(){$("#mid").show();$("#right").show();this.el.hide()},listen:function(){var a=this;a.on("switchModule",function(){a.setTitle()})}});M.system.regSystem("phone",M.UI.PhoneFrame);$('<li id="phone_nav"><a class="phone" href="#phone">\u627e\u56de\u624b\u673a</a></li>').insertAfter("#img_nav");
